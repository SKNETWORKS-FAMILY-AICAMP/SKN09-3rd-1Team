# 👩🏻‍⚖️ SK Networks AI CAMP 9기 - 3rd 1Team: LawQuick
- **주제:** LLM을 연동한 내외부 문서 기반 질의 응답 시스템
- **개발 기간:** 2025.03.28 ~ 2025.03.31
---
# 📌 목차

<details>
<summary>목차 내용</summary>

### 1. [팀 소개](#0️⃣-팀-소개)  
### 2. [프로젝트 개요](#1️⃣-프로젝트-개요)  
### 3. [기술 스택](#2️⃣-기술-스택)  
### 4. [시스템 아키텍처](#3️⃣-시스템-아키텍쳐)  
### 5. [WBS](#4️⃣-wbs)  
### 6. [요구사항 명세서](#5️⃣-요구사항-명세서)  
### 7. [수집한 데이터 및 전처리 요약](#6️⃣-수집한-데이터-및-전처리-요약)  
### 8. [DB 연동 구현 코드](#7️⃣-db-연동-구현-코드)  
### 9. [모델 선정 이유](#8️⃣-모델-선정-이유)  
### 10. [테스트 계획 및 결과 보고서](#9️⃣-테스트-계획-및-결과-보고서)  
### 11. [진행 과정 중 프로젝트 개선 노력](#🔟-진행-과정-중-프로젝트-개선-노력)  
### 12. [수행 결과](#*️⃣-수행-결과)  
### 13. [한 줄 회고](#✳️-한-줄-회고)  

</details>

----
# 0️⃣ **팀 소개**
## ✅ **팀명: LawQuick**
- 가족법 문제 해결의 가장 빠른 길

## ✅ **팀원 소개**

| [@김하늘](https://github.com/nini12091)                      | [@박유진](https://github.com/YUJINDL01)                       |  [@박주은](https://github.com/pprain1999)                       | [@유지은](https://github.com/yujitaeng)                       |
|---------------------------------------------------------------|---------------------------------------------------------------------|---------------------------------------------------------------------|---------------------------------------------------------------------|
| <img src="https://github.com/user-attachments/assets/e7dd2863-b577-4385-a46c-7163efb0bfe4" width="200" height="200">         | <img src="https://github.com/user-attachments/assets/c8ce1260-d6ca-4659-89c3-5d9f06847812" width="200" height="200" />| <img src="https://github.com/user-attachments/assets/c80b5b8d-4a42-4ed1-950f-b0ea5b078f51" width="200" height="200">             |  <img src="https://github.com/user-attachments/assets/7fdacbe3-b568-4c42-8758-d189ec522bc3" width="200" height="200" />|

<br>

----
# 1️⃣ **프로젝트 개요**
## ✅ **프로젝트 명: LawQuick**
## ✅ **프로젝트 소개: 이혼 특화 AI 법률 상담 챗봇**

**LawQuick**은 이혼 분쟁을 겪는 사용자들이 법률 정보를 통해 자신의 상황을 이해하고 조언을 얻을 수 있도록 돕는 **AI 기반 가족법 상담 챗봇**

## ✅ **프로젝트 필요성**


### 📈 나홀로 소송 증가
![image (5)](https://github.com/user-attachments/assets/9278a929-ee80-4aa8-b479-7b1c45dd8b75)

![image (6)](https://github.com/user-attachments/assets/5c91008a-dcb5-4d09-a6f6-0404a3573b4f)

출처: [https://www.mk.co.kr/news/society/9878764](https://www.mk.co.kr/news/society/9878764)

- 제대로 된 법률 서비스를 이용하려면 **높은 비용 부담**이 존재함
- 비용 문제로 법률 전문가의 도움 없이 소송을 진행하는 **'나홀로 소송'** 사례 증가

### 📚 법률 해석의 어려움

- 정보는 많지만, **자신의 사례에 어떤 법이 적용되는지 알기 어려움**
- 판례나 조항의 해석이 어려워 **일반인의 이해에는 한계**

## ✅ **프로젝트 목표**

### 📈 **법률 정보의 접근성 향상**
    
* 복잡한 법률 용어를 **쉽고 간결한 Q&A 형식의 정보 제공**
    
### 👤 **개인화된 법률 조언 제공**
    
* 단순 정보 나열이 아닌, **사용자 상황을 반영한 맞춤형 상담 응답**
    
### 💸 **법률 서비스 진입장벽 완화**
    
* **비용 부담 없이 초기 상담을 제공**하고, 사용자의 법적 고민을 가볍게 나눌 수 있는 창구 제공
<br>

----

# 2️⃣ **기술 스택**
<br>

| 카테고리 | 기술 스택 |
|----------|-------------------------------------------|
| **사용 언어** | ![Python](https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=Python&logoColor=white) |
| **LLM** | ![OpenChat](https://img.shields.io/badge/OpenChat-FFB000?style=for-the-badge&logo=OpenAI&logoColor=white) ![LangChain](https://img.shields.io/badge/LangChain-005F73?style=for-the-badge&logo=Chainlink&logoColor=white) |
| **벡터 데이터베이스** | ![FAISS](https://img.shields.io/badge/FAISS-009688?style=for-the-badge&logo=Apache&logoColor=white) |
| **임베딩 모델** | ![OpenAI Embeddings](https://img.shields.io/badge/OpenAI%20Embeddings-8C9E90?style=for-the-badge&logo=OpenAI&logoColor=white) |
| **실행 환경** | ![RunPod](https://img.shields.io/badge/RunPod-FF4500?style=for-the-badge&logo=Render&logoColor=white) |
| **모델 튜닝/학습 프레임워크** | ![PyTorch](https://img.shields.io/badge/PyTorch-EE4C2C?style=for-the-badge&logo=PyTorch&logoColor=white) ![Transformers](https://img.shields.io/badge/Transformers-FFCC00?style=for-the-badge&logo=HuggingFace&logoColor=black) ![LoRA](https://img.shields.io/badge/LoRA-F76D57?style=for-the-badge&logo=HuggingFace&logoColor=white) |
| **인터페이스(UI)** | ![Gradio](https://img.shields.io/badge/Gradio-20B673?style=for-the-badge&logo=Gradio&logoColor=white) |
| **형상 관리 및 협업** | ![Git](https://img.shields.io/badge/Git-F05032?style=for-the-badge&logo=Git&logoColor=white) ![GitHub](https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=GitHub&logoColor=white) ![Notion](https://img.shields.io/badge/Notion-000000?style=for-the-badge&logo=Notion&logoColor=white) ![Google Drive](https://img.shields.io/badge/Google%20Drive-4285F4?style=for-the-badge&logo=Google%20Drive&logoColor=white) |


<br>

----
# 3️⃣ **시스템 아키텍처 및 처리 흐름**

## ✅ 시스템 아키텍처

LawQuick은 **RAG(Retrieval-Augmented Generation)** 기반 구조로 설계됨.  

📌 구성 요소  
- **FAISS 벡터 DB**: 의미 기반 문서 검색  
- **OpenChat 기반 파인튜닝 LLM**: 정형화된 응답 생성  
- **GPT 모델 (보조적 역할)**: 응답 품질 보완

![시스템 아키텍처](https://github.com/user-attachments/assets/fcbd8bc8-1102-4568-8008-39fc45cf8b51)

## ✅ 시스템 플로우

📌 구성 요소  
1. **질문 입력**  
   사용자가 자연어로 질문을 입력

2. **문서 검색**  
   FAISS를 통해 의미 유사도가 높은 판례 및 법령 문서 검색

3. **프롬프트 구성**  
   검색된 문서와 질문을 결합하여 하나의 입력 프롬프트로 생성

4. **모델 응답 생성**  
   파인튜닝된 LLM이 구조화된 답변을 생성

5. **후처리 (선택적)**  
   응답 품질이 부족한 경우 GPT를 통해 보완

6. **학습 활용 (점선 영역)**  
   GPT가 생성한 고품질 응답은 추후 파인튜닝 데이터로 재활용 가능

![시스템 플로우](https://github.com/user-attachments/assets/ee51656a-52aa-40d4-bdb2-cd75248111ae)

> **전체 구조 요약:**  
> 사용자 질문 → 문서 검색 → 프롬프트 구성 → 모델 응답 생성

<br>

----

# 4️⃣ **WBS**
프로젝트 기간: 2025-03-18 ~ 2025-03-31
![스크린샷 2025-03-28 172115](https://github.com/user-attachments/assets/38893b7d-fcdf-4a7e-b4ed-ebbcec791a12)

<br>

----

# 5️⃣ **요구사항 명세서**

![image (1)](https://github.com/user-attachments/assets/a28fb2c7-aa58-4d99-bd0a-0c0f1c6cda3f)

<br>

----
# 6️⃣ 수집한 데이터 및 전처리 요약

## ✅ **판례 데이터**

- **출처**: 국가법령정보센터 Open API
- **수집 방식**: “이혼” 관련 키워드 약 60여 개를 활용하여 다양한 이혼 사례에 대한 판례 크롤링
- **전처리 과정**:
    - `판례내용`이 없는 항목 제거
    - 구조가 깨졌거나 필드 누락된 항목 필터링
    - 중첩 필드(`판례내용`) 구조 정리 및 일관화
    - 한국어 불용어 처리
- **최종 확보량**: **5,549건**

### 📦 판례 데이터 구조

| 필드명 | 설명 | 데이터 타입 |
| --- | --- | --- |
| 판례일련번호 | 판례 고유 식별자 | `string` |
| 사건명 | 사건의 명칭 | `string` |
| 사건번호 | 법원 사건 번호 | `string` |
| 선고일자 | 판결 선고 일자  | `string` |
| 법원명 | 판결을 내린 법원 | `string` |
| 사건종류명 | 사건 유형 (형사, 민사 등) | `string` |
| 사건종류코드 | 사건 종류 코드 | `string` |
| 판결유형 | 판결 방식 (판결, 결정 등) | `string` |
| 선고 | 선고 여부 | `string` |
| 판시사항 | 판결에서 다룬 주요 쟁점 | `string` |
| 판결요지 | 판결 요약 | `string`  |
| 참조조문 | 인용된 법 조문 | `string` |
| 참조판례 | 인용된 판례 | `string` |
| 판례내용 | 판결 상세 정보  | `object` |

### 🔹 판례내용 하위 필드

| 하위 필드명 | 설명 | 데이터 타입 |
| --- | --- | --- |
| 피고인 | 피고인 정보 | `string` |
| 상고인 | 상고 제기자 정보 | `string` |
| 변호인 | 변호인 이름 및 소속 | `string` |
| 원심판결 | 원심 판결 내용 | `string` |
| 주문 | 대법원의 판결 결과 | `string` |
| 이유 | 판결 이유 설명 | `string` |

## ✅ **법률 데이터**

- **출처**: [국가법령정보센터](https://www.law.go.kr/) PDF 문서
- **수집 방식**: “이혼” 관련 법률 PDF 수집 → 텍스트 추출 → JSON 구조화
- **전처리 과정**:
    - 조항을 `조항번호`, `조항제목`, `조항내용`으로 분리
    - 본문 내 항목(①②③…)을 자동으로 `제1항`, `제2항` 등으로 구조화
    - 한글 불용어 처리
- **최종 확보량**: **70개 법률 / 5,819개 조항**

### 📚 법률 데이터 구조

| 필드명 | 설명 | 데이터 타입 |
| --- | --- | --- |
| 법률명 | 해당 조항이 속한 법률명 | `string` |
| 조항번호 | 조문 번호 | `string` |
| 조항제목 | 조문 제목 또는 주제 | `string` |
| 조항내용 | 각 항의 조문 내용 | `object` |

### 🔸 조항내용 하위 구조

| Key | 설명 | 데이터 타입 |
| --- | --- | --- |
| 조항 번호 | 조항의 각 항 내용 | `string` |

## ✅ **파인튜닝 학습용 Q&A 데이터**

- **목적**: 법률 문서 기반 챗봇을 학습시키기 위한 질의응답 데이터 자동 생성

- **데이터 생성 방식**:
  * 판례 및 법령 문서를 **내용 단위로 분할(chunking)**  
    → 한 문서가 너무 길 경우, 500자 내외로 잘라서 다루기 쉽게 처리    
  * 각 chunk 내용을 바탕으로 자연어 질문 3개 자동 생성 (LLM 사용)  
  * 생성된 질문에 대해 RAG 기반으로 문서 검색 및 응답 생성  
  * `instruction`, `input`, `output` 형식으로 정리하여 저장

- **데이터 구조**:

| 항목 | 설명 |
|------|------|
| `instruction` | 문서 기반으로 생성된 질문 |
| `input` | 질문과 관련된 문서 내용 (RAG 검색 결과) |
| `output` | 질문에 대한 GPT 응답 결과 |

- **최종 확보량**: 총 **200개 질의응답 쌍**
----
# 7️⃣ **DB 연동 구현 코드**

- [**📂 DB 연동 구현 코드 (Google Drive)**](https://drive.google.com/drive/folders/10jCckp9hGfIuIjyjUmA1QuvJqft6pvbR)
- [**🧠 파인튜닝 모델 (Hugging Face)**](https://huggingface.co/skyss/skn-3rd/tree/main)

---

# 8️⃣ 모델 선정 이유

## 🧠 사용된 LLM: [`openchat/openchat-3.5-0106`](https://huggingface.co/openchat/openchat-3.5-0106)

OpenChat은 법률 상담과 같이 **정형화된 응답**, **근거 중심 추론**, **빠른 응답 시간**이 필요한 작업에 적합한 오픈소스 LLM임.

## ✅ **OpenChat의 특징과 장점**

* **C-RLFT 학습 방식**  
  → 명시적 선호 레이블 없이도 학습 가능 → 파인튜닝에 효율적임

* **경량화 구조**  
  → 추론 속도가 빠르고, 적은 자원으로 실행 가능함

* **출력 형식 제어 용이**  
  → 답변 포맷을 일관되게 유지할 수 있어 구조화된 응답에 적합함

* **문맥 반영 성능 우수**  
  → 검색 기반 문서(RAG)와 결합 시, 문맥을 안정적으로 활용함

* **오픈소스 접근 가능성**  
  → 커스터마이징 및 배포가 자유로움 (Apache 2.0 라이선스)

## 📌 선택 이유 요약

* 정형화된 법률 상담 포맷에 맞는 출력 제어가 쉬움  
* 추론 속도와 리소스 효율성이 뛰어남  
* 파인튜닝 및 실시간 응답 시스템 적용에 실용적임

## 📚 모델 정보

* **제작자**: Guan Wang et al.  
* **논문**: [OpenChat: Advancing Open-source Language Models with Mixed-Quality Data](https://arxiv.org/abs/2309.11235)  
* **라이선스**: Apache 2.0  
* **모델 페이지**: [HuggingFace 링크](https://huggingface.co/openchat/openchat-3.5-0106)

----
# 9️⃣ 테스트 계획 및 결과 보고서

## 🧪 평가 방식

모델 응답은 총 **30개 질문, 6개 항목, 100점 만점** 기준으로 평가함:

### ✅ LLM 기반 가사법 상담 응답 평가 기준

#### 📌 1. 응답 속도 (최대 10점)

| 응답 시간  | 점수 |
|------------|------|
| 0~10초     | 10점 |
| 11~20초    | 9점  |
| 21~30초    | 8점  |
| 31~45초    | 7점  |
| 46~60초    | 6점  |
| 61~90초    | 4점  |
| 90초 초과  | 0점  |

#### 📌 2. 법적 근거 제공 (최대 30점)

**🔹 법 조항 제시 (최대 15점)**  
- 언급 없음: 0점  
- 조문 번호만 제시: 3점  
- 번호 + 간단 설명: 5점  
- 일반적 해석 포함: 10점  
- 정확한 맥락과 해석: 15점

**🔹 판례 제시 (최대 15점)**  
- 언급 없음: 0점  
- 판례 이름만 언급: 5점  
- 판례 번호 또는 요지 포함: 10점  
- 판례 번호 + 사례 분석: 15점

#### 📌 3. 사용자 맞춤 조언 제공 (최대 25점)

- 일반 설명, 개인 상황 반영 없음: 0점  
- 상황 일부 반영, 피상적: 10점  
- 실질 조언 포함: 20점  
- 전략 제시까지 포함: 25점

#### 📌 4. 입력 반영 정확도 (최대 15점)

- 반영 안 됨: 0점  
- 단순 요약: 7점  
- 핵심 요소 반영: 10점  
- 판단 기준으로 활용: 15점

#### 📌 5. 출력 형식 일관성 (최대 10점)

- 항목 구조 없음: 0점  
- 구조만 있음 (혼란): 5점  
- 구조 + 정돈 부족: 8점  
- 명확한 항목 + 시각 구성: 10점

#### 📌 6. 질문 품질 (최대 10점)

- 비현실적/불명확 질문: 0점  
- 일반론적 질문: 5점  
- 구체성 부족: 7~8점  
- 실효성 높고 사회적 빈도 높음: 10점

## 📊 실제 응답 예시

<details>
<summary>❓ 지금 별거 중인데, 이 상태가 오래 가면 나중에 자동으로 이혼이 되나요? 별거하는 동안 제가 번 돈이나 새로 산 물건도 나중에 나눠야 하나요?</summary>

<br>

### 🧾 전체 모델 응답

1️⃣ **관련 법률 조항**  
- **민법 제840조**: 혼인 관계의 해소 사유로써 이혼을 규정하고 있는데, 자동 이혼이라는 개념은 존재하지 않습니다. 이혼은 법원의 판결이나 양측의 합의에 의한 절차가 필요합니다.  
- **민법 제741조~748조**: 혼인 중 재산의 취득 및 처분에 관한 규정으로, 이혼 시 재산 분할에 대해서는 별도의 결정이 필요함을 명시하고 있습니다.

2️⃣ **주요 판례 요약**  
- **대법원 2013므568 판결**: 별거 상태가 지속되더라도, 법원의 확인 없이 자동으로 이혼되는 것은 법률적으로 불가능하며, 반드시 이혼 소송이나 협의 이혼 절차를 거쳐야 합니다.  
- **대법원 2006므849 판결**: 혼인 중 별거 동안 취득한 재산이라 하더라도 별도로 분할 대상이 되는지는 이혼 과정에서 법원이 판단합니다. 이는 별거 중의 소득과 재산이 부부 공동재산으로 취급될 수 있음을 보여줍니다.

3️⃣ **일반적인 법적 해석**  
- **자동 이혼**: 별거의 기간과 상관없이 한국 법률상 자동으로 이혼이 되지 않으며, 이혼은 반드시 법적 절차를 통해 이루어져야 함을 명확히 합니다.  
- **재산 분할**: 별거 중 취득한 재산은 혼인 관계가 법적으로 종료되기 전까지는 부부 공동재산으로 간주될 가능성이 있으며, 따라서 이혼 과정에서 쌍방의 기여도 등을 토대로 분할이 결정됩니다.

4️⃣ **맞춤형 대응 전략**  
- **법률 상담**: 이혼을 원하신다면, 전문 가족법 변호사와 상담하여 귀하의 상황에 맞는 이혼 절차를 시작하는 것이 필요합니다.  
- **재산 관리**: 별거 중 취득한 재산이나 소득에 대해 명확한 기록을 남기고, 이를 법적 절차에 활용할 수 있도록 준비하는 것이 좋습니다.  
- **소통 유지**: 배우자와의 커뮤니케이션을 통해 서로의 의사를 명확히 하고, 합의 가능한 부분에 대해서는 협의를 진행하는 것이 합리적입니다.  
- **재정적 준비**: 이혼 시 발생할 수 있는 재정적 변화를 대비하여, 독립적인 금융 자산을 확보하고 장기적인 재정 계획을 세워 두는 것이 좋습니다.

🟠 *(파인튜닝 모델 + GPT)*

📋 참고 문서

- **문서 1 (2012고합404)**: 별거 중 감정 격화 및 의심 상황에서의 대응 언급  
- **문서 2 (2007노425)**: 혼인 결합이 무책임하게 이루어진 사회적 맥락 강조  
- **문서 3**: 별거 상태 중 정서적 고립, 부정행위, 가족 해체 과정을 담은 상담 대화 일부

### 📋 응답 평가표

| 항목             | 세부 평가 내용                                | 점수  |
|------------------|-----------------------------------------------|--------|
| ⏱ 응답 속도     | 71초 (61~90초 구간)                          | 4점    |
| 📚 법적 근거     | 조문 제시 + 해석 양호, 판례 구체성 약간 부족 | 22점   |
| 💡 맞춤 조언     | 전략 및 실천 방안 명확                        | 25점   |
| 🎯 입력 반영     | 질문 핵심 요소가 논리 흐름에 직접 반영됨     | 15점   |
| 📋 출력 형식     | 단계별 정돈 + 이모지 활용                    | 9점    |
| ❓ 질문 품질     | 실효성 높고 현실성 뛰어남                     | 10점   |

✅ **총점: 85점**

</details>

## 📊 테스트 결과

| 항목 | 결과 |
|------|------|
| 📎 평균 점수 | **86.9점** |
| 🎯 90점 이상 응답 비율 | **10%** |
| 🧠 응답 일관성 | 매우 높음 (같은 질문 반복에도 구조·논리 유지) |
| 📘 강점 | 위자료, 재산분할, 양육비 관련 강제집행 설명 |
| 🔁 모델 안정성 | 질문 다양성에도 출력 구조 안정적으로 유지 |

<details>
<summary>📊 이혼 법률 Q&A 챗봇 응답 정밀 평가표</summary>

<br>

총 30개의 이혼 관련 질문에 대해 LLM 기반 챗봇이 제공한 응답의 품질을 다음 기준으로 정밀 평가한 결과

| 번호 | 질문 요약 | ⏱ 응답 속도 | 📚 법적 근거 | 💡 맞춤 조언 | 🎯 입력 반영 | 📋 출력 형식 | ❓ 질문 품질 | ✅ 총점 |
|------|------------|--------------|----------------|----------------|----------------|----------------|------------------|----------|
| 1 | 양육비 미지급 시 대응 | 4점 | 25점 | 24점 | 15점 | 10점 | 10점 | **88점** |
| 2 | 외도 증거 유효성 | 5점 | 24점 | 23점 | 14점 | 10점 | 10점 | **86점** |
| 3 | 이혼 소송 중 조정 참여 | 5점 | 24점 | 23점 | 14점 | 10점 | 10점 | **86점** |
| 4 | 생활비 지원 반환 여부 | 4점 | 25점 | 23점 | 14점 | 10점 | 9점 | **85점** |
| 5 | 위자료 방어 전략 | 5점 | 23점 | 24점 | 15점 | 10점 | 10점 | **87점** |
| 6 | 외도 증거 미리 확보 | 4점 | 25점 | 24점 | 14점 | 10점 | 10점 | **87점** |
| 7 | 협의이혼 변호사 필요 여부 | 5점 | 24점 | 22점 | 14점 | 10점 | 10점 | **85점** |
| 8 | 이혼 준비 절차 | 5점 | 23점 | 24점 | 14점 | 10점 | 10점 | **86점** |
| 9 | 이혼 소송 피고 불출석 시 | 4점 | 24점 | 24점 | 15점 | 10점 | 10점 | **87점** |
| 10 | 이혼 전 재산처분 방지 | 5점 | 25점 | 24점 | 15점 | 10점 | 10점 | **89점** |
| 11 | 소송 중 대화 제안 | 4점 | 24점 | 23점 | 15점 | 10점 | 10점 | **86점** |
| 12 | 결혼 중 받은 금전 반환? | 4점 | 25점 | 24점 | 15점 | 10점 | 10점 | **88점** |
| 13 | 외도 증거 보관의 법적 효력 | 4점 | 25점 | 24점 | 14점 | 10점 | 10점 | **87점** |
| 14 | 위자료 청구 방어 (유책無) | 5점 | 25점 | 24점 | 15점 | 10점 | 10점 | **89점** |
| 15 | 양육비 미지급 강제집행 | 4점 | 25점 | 24점 | 15점 | 10점 | 10점 | **88점** |
| 16 | 별거 자동이혼 여부 | 5점 | 24점 | 23점 | 15점 | 10점 | 10점 | **87점** |
| 17 | 협의이혼만으로 법적 완료 가능? | 5점 | 24점 | 23점 | 14점 | 10점 | 9점 | **85점** |
| 18 | 재산 나눌 때 상대방 소득 포함? | 5점 | 25점 | 23점 | 15점 | 10점 | 9점 | **87점** |
| 19 | 아이 양육비 거절 시 대처 | 5점 | 25점 | 24점 | 15점 | 10점 | 10점 | **89점** |
| 20 | 가정폭력 증거 필요성 | 5점 | 25점 | 23점 | 15점 | 10점 | 10점 | **88점** |
| 21 | 친권자 변경 가능 여부 | 4점 | 25점 | 24점 | 15점 | 10점 | 10점 | **88점** |
| 22 | 가정법원 조정 참여 필요성 | 5점 | 24점 | 23점 | 14점 | 10점 | 10점 | **86점** |
| 23 | 별거 중 재산 취득 분할 여부 | 5점 | 24점 | 24점 | 14점 | 10점 | 10점 | **87점** |
| 24 | 상대 배우자 몰래 재산 은닉 | 5점 | 25점 | 23점 | 15점 | 10점 | 10점 | **88점** |
| 25 | 전업주부 재산 분할 가능성 | 4점 | 25점 | 23점 | 14점 | 10점 | 10점 | **86점** |
| 26 | 자녀 면접교섭 거부 대응 | 4점 | 24점 | 23점 | 14점 | 10점 | 10점 | **85점** |
| 27 | 배우자 급여 압류 가능 여부 | 4점 | 25점 | 24점 | 15점 | 10점 | 10점 | **88점** |
| 28 | 이혼 시 전세보증금 분할 | 5점 | 25점 | 23점 | 15점 | 10점 | 10점 | **88점** |
| 29 | 양육비 집행 전 제도 활용 | 4점 | 25점 | 24점 | 15점 | 10점 | 10점 | **88점** |
| 30 | 전 배우자와 합의문 작성 | 4점 | 25점 | 24점 | 15점 | 10점 | 10점 | **88점** |

</details>

## ✅ 테스트 결론

- **📚 법적 근거 제공력**  
  : 민법 및 가사소송법 조문, 대법원 판례 등을 구조화하여 **정확하고 구체적으로 인용**함  
- **💡 사용자 맞춤형 조언**  
  : 질문자의 혼인 기간, 자녀 유무, 재산 상황 등 **입력 정보를 반영한 전략적 안내** 제공  
- **📋 응답 형식 일관성**  
  : `1️⃣ 법 조항 → 2️⃣ 판례 → 3️⃣ 해석 → 4️⃣ 조언`의 **단계형 구조 유지**, 시각적 가독성 우수  

또한 동일 질문에 대해 **논리 흐름과 정보 일관성을 유지**하며,  
실제 법률 상담 상황에서 요구되는 **명확성, 실용성, 신뢰성** 모두 충족
<br>

---

# 🔟 **진행 과정 중 프로젝트 개선 노력**

## ✅ **1. 기능 개선**

- **질문 유형 자동 분류**  
  사용자의 질문을 *일반 상담 / 법령 조문 설명 / 판례 요약*으로 자동 분류하여 적절한 응답 포맷을 적용함

- **문서 기반 상담 제공**  
  단순한 답변이 아닌, 관련 법령·판례 원문을 함께 출력하여 신뢰도를 높임

- **문서 유사도 필터링 도입**  
  FAISS + OpenAI 임베딩 기반 유사도 필터링으로 무관한 문서 제거 및 의미 중심의 문서 검색 구현

- **하이브리드 응답 구조 적용**  
  파인튜닝 모델이 생성한 초안에 대해 GPT가 후처리하여 보다 명확하고 전문적인 답변 제공

## ✅ **2. 성능 최적화**

- **벡터 기반 문서 필터링 전환**  
  GPT 기반 필터링 대신 임베딩 유사도 필터링 적용 → 응답 속도 향상 및 리소스 절감

- **GPT 호출 최소화 전략 적용**  
  파인튜닝 모델의 응답 품질이 충분할 경우 GPT 보완 생략 → 처리 시간 및 API 비용 절감

- **QLoRA 기반 학습 효율화**  
  QLoRA + 4bit 양자화를 통해 학습 리소스를 줄이면서도 성능 저하 없이 파인튜닝 가능하도록 구성

## ✅ **3. 버그 및 품질 개선**

- **반복 또는 비논리 응답 자동 교체**  
  파인튜닝 모델 응답 중 반복 또는 이상 문장이 감지되면 GPT 단독 응답으로 자동 대체

- **함수 정의 오류 복구**  
  `extract_single_answer`, `filter_relevant_docs` 등 누락되거나 오류가 발생한 함수들을 신속히 재정의하여 안정성 확보

- **조문 설명 전략 제거 처리**  
  법률 조문 설명 응답에 전략적 조언이 포함되지 않도록 GPT 프롬프트를 명확히 설정

## ✅ **4. 사용자 경험 개선 (UI/UX)**

- **Gradio 기반 대화형 UI 구현**  
  별도 설치 없이 웹에서 바로 사용 가능한 직관적 인터페이스 구성

- **2열 사용자 정보 입력 폼 제공**  
  항목별 '비공개' 옵션을 포함하여 민감 정보를 보호하면서도 간편하게 입력 가능하도록 구성

- **응답 출처 시각화**  
  응답의 출처가 파인튜닝(🟢)인지 GPT 보완(🟠)인지 구분 가능하도록 시각적 표시 도입

- **대화 이력 유지 기능**  
  이전 질문 및 응답을 보존하여, 연속된 상담 흐름과 맥락을 자연스럽게 이어감

---

# *️⃣ **수행 결과**

![최종-결과-화면-gif](https://github.com/user-attachments/assets/0177453f-084d-4b77-b322-9f5cb51793f3)

<br>

사용자 화면
![사용자 화면](https://github.com/user-attachments/assets/548a31c0-dfe2-44be-b5bc-80bda8c0d4e2)

질의응답 화면
![결과 2 화면](https://github.com/user-attachments/assets/53f8786d-aa7b-4110-96cc-cf2d50ac281a)
![결과 3](https://github.com/user-attachments/assets/74d8da77-18c9-47aa-9764-0f53d4533254)
![결과 4](https://github.com/user-attachments/assets/8adf79e4-3d05-4f52-b466-74e135a6c806)

질의응답 화면 (파인튜닝된 모델 답변 ver.)
![결과 1(파인튜닝만)](https://github.com/user-attachments/assets/455e7bb4-24c0-4690-b401-9cb1de9a68a0)
![결과 2(파인튜닝만)](https://github.com/user-attachments/assets/d47a8ba0-1761-49a4-8a98-0ad77de4d07f)
![결과 3(파인튜닝만)](https://github.com/user-attachments/assets/64ba7522-8fc0-46e8-a000-4f8adb7a43f9)

<br>

---

# ✴️ **결론**

## 🔍 향후 개선 방향

| 개선 항목 | 상세 내용 |
|-----------|-----------|
| 🔄 법률 지식 확장 | 최신 개정 법령과 신규 판례 반영을 위한 지속적 데이터 업데이트 |
| ⚡ 응답 속도 최적화 | 실시간 상담 적용을 위한 응답 시간 개선 및 처리 경량화 |
| 🎯 프롬프트 다양화 | 입력 패턴별 대응력을 높이기 위한 prompt 구조 개선 |
| 📥 사용자 피드백 반영 | 실제 이용자 경험 기반의 응답 튜닝 및 보완 체계 도입 |


<br>

---

# ✳️ **한 줄 회고**

- ❤김하늘
   - 초기에는 조문과 조언이 뒤섞이거나 형식이 깨지는 문제가 있어, JSON 데이터를 조항별로 명확히 나누고 표현도 수정해 다시 파인튜닝했습니다. 이후 출력 형식 예시를 프롬프트에 직접 넣어주는 방식으로 바꾸자 응답의 일관성이 크게 좋아졌고, 데이터 구성과 프롬프트 설계가 모델 품질에 얼마나 큰 영향을 미치는지 실감할 수 있었습니다.
- 💜박유진
   - 파인튜닝 데이터를 직접 생성하면서, **모델이 학습 과정에서 '패턴'을 인식한다는 의미**는 단순한 문장 구조나 표현 방식뿐 아니라, **인풋과 아웃풋 등 필요한 정보가 항상 일정한 방식으로 제공되어야 한다는 것**임을 확실히 깨달을 수 있었습니다.
- 💙박주은
   - <!-- 기입 -->
- 💚유지은
   - 파인튜닝으로 모델의 정확성을 만들고 프롬프트로 그것을 더 세부적으로 조율을 할 수 있다는 것을 느꼈고 어느 하나도 빠져선 안될 중요한 부분들이라는 것을 깨달았습니다. LLM기반으로 사용자 케이스의 유사성을 따져가며 답변을 주는 모델을 만드는 과정이 험난했으나 과정을 익혀갈 수 있어 좋았습니다.

<br>
